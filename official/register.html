<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="UTF-8">
        <title>iCE Web注册</title>
        <link rel="stylesheet" type="text/css" href="../css/accountOS.css" />
        <style>
        input{
            -webkit-appearance: none;
        }
        #leftBody img{
            float:left;
        }
        article{
            border-right: 5px solid red;
        }
        #oneTitle{
            float:left;
            padding-right:7px;
            border-right:5px solid red;
        }
        #leftBody{
            width:400px;
            height:350px;
            margin-left:50px;
        }
        #avatarFileBox{
            float:left;
            width:40px;
            height:40px;
            margin:5px;
            border:5px solid white;
            border-radius:50%;
            overflow:hidden;
        }
        #avatarFake{
            width:40px;
            height:40px;
            position:absolute;
            text-align:center;
            line-height:40px;
            background-color:#dddddd;
            color:black;
            border-radius:50%;
            transition:all 0.2s linear 0s;
        }
        #avatarFake:hover{
            color:white;
            cursor:pointer;
            background-color:black;
        }

        </style>
    </head>
    <body>
        <header></header>
        <article>
            <div id="leftBody">
                <h1 id="oneTitle">iCE PASS 注册</h1>
                <label id="avatarFileBox" for="avatarFile">
                    <span id="avatarFake" class="iconfont">&#xe64d;</span>
                </label>
                <img src="../img/icepass.png" alt="iCE Pass">
            </div>
            <form action="../php/register.php" method="post" enctype="multipart/form-data">
                <input type="hidden" name="max_file_size" value="1048576">
                <input id="avatarFile" type="file" name="file" style="display:none;">
                <div id="content">已经有账号了？<a href="login.html">去登陆</a></div>
                <div class="inFromDiv">
                    <label for="fname">账号</label>
                    <input class="inFrom" id="fname" name="id" placeholder="用于登陆的唯一码,不区分大小写"  type="text">
                </div>
                <div class="inFromDiv">
                    <label for="tname">昵称</label>
                    <input class="inFrom" id="tname" name="fname" type="text" placeholder="怎么称呼你呢" >
                </div>
                <div class="inFromDiv">
                    <label for="pwd">密码</label>
                    <input class="inFrom" id="pwd" type="password" placeholder="一定要记住！">
                </div>
                <div class="inFromDiv">
                    <label for="tpwd">密码</label>
                    <input class="inFrom" id="tpwd" name="pwd" type="password" placeholder="验证密码">
                </div>
                <div id="smtAndReset">
                    <input id="smt" disabled="disabled" type="submit" value="注册">
                    <input id="reset" type="reset" value="清除">
                </div>
            </form>
        </article>
        <footer></footer>
        <script>
            let flag1, flag2, flag3, flag4, pwdValue;
            let oFname = document.getElementById("fname");
            let oContent = document.getElementById("content");
            let oPwd = document.getElementById("pwd");
            let oTpwd = document.getElementById("tpwd");
            let oSmt = document.getElementById("smt");
            let oAvatarFake = document.getElementById("avatarFake");
            let myregex = /^[a-zA-Z]\w{4,15}$/;
            let setPwd = /^[0-9A-Z_a-z]{8,20}$/;
            oAvatarFake.onclick = function (){
                this.style.fontSize = '10px';
                this.innerHTML="就绪";
            }

            oFname.onkeyup = function (){ForT()}
            oPwd.onkeyup = function (){ForT()}
            oTpwd.onkeyup = function (){ForT()}

            function ForT(){
                if (pwdValue===oTpwd.value) {
                    flag3 = "true";
                } else {
                    flag3 = "false";
                    oContent.innerHTML = "两次输入密码不一致";
                }

                if (setPwd.test(oPwd.value)) {
                    flag2 = "true";
                    pwdValue = oPwd.value;
                } else {
                    flag2 = "false";
                    oContent.innerHTML = "密码只能是由数字，大小写字母，或“_”组成的8-20位字符串";
                }

                if (myregex.test(oFname.value)) {
                    flag1 = "true";
                } else {
                    flag1 = "false";
                    oContent.innerHTML = "ID只能是由字母数字，或“_”组成的4-15位字符串，且必须为字母开头";
                }

                flag4=flag1+flag2+flag3;
                if (flag4==="truetruetrue"){
                    oContent.innerHTML = " ";
                    oSmt.removeAttribute("disabled");
                }else{
                    oSmt.setAttribute('disabled','disabled');
                }
            }
        </script>
        <script src="../components/nav.js"></script>
    </body>
</html>